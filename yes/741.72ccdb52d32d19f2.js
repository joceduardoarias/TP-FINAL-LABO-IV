"use strict";(self.webpackChunktpfinal=self.webpackChunktpfinal||[]).push([[741],{741:(S,u,l)=>{l.r(u),l.d(u,{GenerarTurnosModule:()=>G});var d=l(9808),g=l(1402),t=l(5e3),f=l(4775),m=l(7423);function _(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a")(1,"button",4),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().emitirEspecialidad(a)}),t._uU(2),t.qZA()()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e)}}let x=(()=>{class o{constructor(e){this.cargarhora=e,this.list=[],this.encontrado=!1,this.especialidad=new t.vpe,e.getAll().valueChanges().subscribe(i=>{for(let n=0;n<i.length;n++){const a=i[n].especialidad;this.list.includes(i[n].especialidad)||this.list.push(a)}})}ngOnInit(){}emitirEspecialidad(e){this.especialidad.emit(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-elegir-especialidad"]],outputs:{especialidad:"especialidad"},decls:6,vars:1,consts:[[1,"container"],[1,"d-flex","flex-column","align-items-center","justify-content-center","vh-100"],[1,"example-button-row"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3,"Seleccione una opci\xf3n"),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,_,3,1,"a",3),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngForOf",i.list))},directives:[d.sg,m.lW],styles:["img[_ngcontent-%COMP%]{display:block;height:100px;width:103px}.c[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center}.example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .example-button-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:8px}"]}),o})();function C(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",2),t._UZ(2,"img",3),t.TgZ(3,"div",4)(4,"button",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().accion(a)}),t._uU(5),t.qZA()()()()}if(2&o){const e=r.$implicit;t.xp6(2),t.Q6J("src",e.imagen,t.LSH),t.xp6(3),t.Oqu(e.nombre)}}let y=(()=>{class o{constructor(){this.obj=new t.vpe}ngOnInit(){}accion(e){this.obj.emit(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-elegir-especialista"]],inputs:{usuarios:"usuarios"},outputs:{obj:"obj"},decls:2,vars:1,consts:[[1,"container","c"],[4,"ngFor","ngForOf"],[1,"card",2,"width","10rem"],["alt","...",1,"card-img-top",3,"src"],[1,""],[1,"btn","btn-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,C,6,2,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.usuarios))},directives:[d.sg],styles:[".c[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center}button[_ngcontent-%COMP%]{width:100%}"]}),o})();class j{}class v{constructor(){this.hora=[]}}class O{}class b{constructor(r,e,i){this.fechas=[],this.email=r,this.especialidad=e,this.fechas=i}}class M{constructor(){this.correoPaciente="",this.correoEspecialista="",this.especialidad="",this.estado="",this.comentariopaciente="No hay comentario",this.comentarioespecialista="No hay comentario",this.comentarioadmin="No hay comentario",this.diagnostico="No hay comentario",this.hora="",this.minutos="",this.dia=""}}var P=l(2613),w=l(6136),T=l(7556);function E(o,r){1&o&&(t.TgZ(0,"div",2),t._UZ(1,"div",3),t.qZA())}function A(o,r){if(1&o&&(t.TgZ(0,"th",7),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.dia)}}function Z(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw().$implicit;return t.oxw(2).quehago(a.dia,n.hora,n.minutos)}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.AsE(" ",e.hora,":",e.minutos," ")}}function F(o,r){if(1&o&&(t.TgZ(0,"div",10),t.YNc(1,Z,2,2,"button",11),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf","habilitado"===e.estado)}}function k(o,r){if(1&o&&(t.TgZ(0,"td",8),t.YNc(1,F,2,1,"div",9),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e.horario)}}function H(o,r){if(1&o&&(t.TgZ(0,"div")(1,"div",4)(2,"table")(3,"thead")(4,"tr"),t.YNc(5,A,2,1,"th",5),t.qZA()(),t.TgZ(6,"tbody")(7,"tr"),t.YNc(8,k,2,1,"td",6),t.qZA()()()()()),2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.arraytercero),t.xp6(3),t.Q6J("ngForOf",e.arraytercero)}}let J=(()=>{class o{constructor(e,i,n){this.hsturnos=e,this.mixto=i,this.auth=n,this.cargando=!0,this.ahora=new Date,this.arrayHorarios=[],this.arraytercero=[],this.unobj=new M,setTimeout(()=>{this.cargando=!1},1200)}ngOnInit(){this.calculartiempo(this.ahora,this.objectoActual.dias,this.objectoActual.hora.horamin,this.objectoActual.hora.horamax).then(e=>{this.desub=this.hsturnos.getAll().valueChanges().subscribe(i=>{this.desub.unsubscribe(),this.objectoguardar=new b(this.objectoActual.email,this.objectoActual.especialidad,e),0==i.length?this.hsturnos.create(this.objectoguardar).then(n=>{}):this.hsturnos.getAll().valueChanges().subscribe(n=>{for(let a=0;a<n.length;a++)if(n[a].email==this.objectoguardar.email&&n[a].especialidad==this.objectoguardar.especialidad)for(let s=0;s<this.objectoguardar.fechas.length;s++)for(let c=0;c<n[a].fechas.length;c++)if(this.objectoguardar.fechas[s].dia==n[a].fechas[c].dia)for(let p=0;p<this.objectoguardar.fechas[s].horario.length;p++)for(let h=0;h<n[a].fechas[c].horario.length;h++)this.objectoguardar.fechas[s].horario[p].hora==n[a].fechas[c].horario[h].hora&&this.objectoguardar.fechas[s].horario[p].minutos==n[a].fechas[c].horario[h].minutos&&(this.objectoguardar.fechas[s].horario[p].estado=n[a].fechas[c].horario[h].estado)})})})}calculartiempo(e,i,n,a){return new Promise((s,c)=>{for(let p=0;p<14;p++){let h=new j;if(this.ahora.setHours(n),this.ahora.setMinutes(0),this.ahora.setSeconds(0),this.arrayHorarios=new Array,this.ahora.getDay()==i[0]||this.ahora.getDay()==i[1]||this.ahora.getDay()==i[2]||this.ahora.getDay()==i[3]||this.ahora.getDay()==i[4]||this.ahora.getDay()==i[5]||this.ahora.getDay()==i[6]){for(;e.getHours()<a;)this.hs=new v,this.dat=new O,this.dat.hora=e.getHours(),this.dat.minutos=e.getMinutes(),this.dat.estado="habilitado",0==this.dat.minutos&&(this.dat.minutos="00"),this.hs=this.dat,this.arrayHorarios.push(this.hs),this.ahora.setMinutes(this.ahora.getMinutes()+30);h.dia=e.toLocaleDateString("en-GB"),h.horario=this.arrayHorarios,this.arraytercero.push(h)}e.setDate(e.getDate()+1)}s(this.arraytercero)})}quehago(e,i,n){for(let a=0;a<this.arraytercero.length;a++)if(this.arraytercero[a].dia==e)for(let s=0;s<this.arraytercero[a].horario.length;s++)this.arraytercero[a].horario[s].hora==i&&this.arraytercero[a].horario[s].minutos==n&&(this.arraytercero[a].horario[s].estado="deshabilitado",this.datin={dia:e,hora:this.arraytercero[a].horario[s].hora,minutos:this.arraytercero[a].horario[s].minutos});this.objectoguardar=new b(this.objectoActual.email,this.objectoActual.especialidad,this.arraytercero),this.buscar(this.objectoActual.email,this.objectoActual.especialidad).then(a=>{null==a?(this.hsturnos.create(this.objectoguardar),this.buscar(this.objectoActual.email,this.objectoActual.especialidad).then(s=>{this.hsturnos.getAll().update(s,this.objectoguardar).then(c=>{this.unobj.correoEspecialista=this.objectoguardar.email,this.unobj.correoPaciente=this.auth.correologeado,this.unobj.estado="pendiente",this.unobj.especialidad=this.objectoActual.especialidad,this.unobj.dia=this.datin.dia,this.unobj.hora=this.datin.hora,this.unobj.minutos=this.datin.minutos,this.mixto.create(this.unobj)})})):this.hsturnos.getAll().update(a,this.objectoguardar).then(s=>{this.unobj.correoEspecialista=this.objectoguardar.email,this.unobj.correoPaciente=this.auth.correologeado,this.unobj.estado="pendiente",this.unobj.especialidad=this.objectoActual.especialidad,this.unobj.dia=this.datin.dia,this.unobj.hora=this.datin.hora,this.unobj.minutos=this.datin.minutos,this.mixto.create(this.unobj)})})}buscar(e,i){return new Promise((n,a)=>{this.hsturnos.getAll().query.get().then(s=>(s.forEach(c=>{if(console.log(c.val().email),e==c.val().email&&i==c.val().especialidad)return n(c.key)}),n(null)))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(P.l),t.Y36(w.n),t.Y36(T.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-elegir-horarios"]],inputs:{objectoActual:"objectoActual"},decls:2,vars:2,consts:[["class","spinner-container",4,"ngIf"],[4,"ngIf"],[1,"spinner-container"],[1,"spinner"],[1,"scroll-container"],["class","dia-cell",4,"ngFor","ngForOf"],["class","horario-cell",4,"ngFor","ngForOf"],[1,"dia-cell"],[1,"horario-cell"],["class","efe",4,"ngFor","ngForOf"],[1,"efe"],["id","bb","class","btn",3,"click",4,"ngIf"],["id","bb",1,"btn",3,"click"]],template:function(e,i){1&e&&(t.YNc(0,E,2,0,"div",0),t.YNc(1,H,9,2,"div",1)),2&e&&(t.Q6J("ngIf",i.cargando),t.xp6(1),t.Q6J("ngIf",!i.cargando))},directives:[d.O5,d.sg],styles:[".d[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center}.efe[_ngcontent-%COMP%]{min-height:50px}#ep[_ngcontent-%COMP%]{display:block;margin-right:50px}.pp[_ngcontent-%COMP%]{padding-right:200px}*[_ngcontent-%COMP%]{margin:0;padding:0}body[_ngcontent-%COMP%]{height:100vh;background:rgb(238,174,202);background:radial-gradient(circle,rgba(238,174,202,1) 0%,rgba(148,187,233,1) 100%);display:flex;justify-content:center;align-items:center;font-family:Quicksand,sans-serif;-webkit-user-select:none;user-select:none}.card[_ngcontent-%COMP%]{width:316px;height:-moz-fit-content;height:fit-content;background-color:#fff;border-radius:15px;box-shadow:0 0 10px #efefef}.calendar-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 20px 15px;border-bottom:1px solid #efefef}.calendar-toolbar[_ngcontent-%COMP%] > .current-month[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#19181a}.calendar-toolbar[_ngcontent-%COMP%] > [class$=month-btn][_ngcontent-%COMP%]{width:40px;aspect-ratio:1;text-align:center;line-height:40px;font-size:14px;color:#19181a;background:#f8f7fa;border:none;border-radius:15px}.weekdays[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-inline:18px}.weekdays[_ngcontent-%COMP%]{padding-top:12px}.calendar-days[_ngcontent-%COMP%]{padding-bottom:12px}.weekday-name[_ngcontent-%COMP%], [class$=-day][_ngcontent-%COMP%]{width:40px;height:40px;color:#19181a;text-align:center;line-height:40px;font-weight:500;font-size:1rem}.weekday-name[_ngcontent-%COMP%]{color:#19181a;font-weight:700}.current-day[_ngcontent-%COMP%]{background-color:#7047eb;color:#f8f7fa;border-radius:15px;font-weight:700;transition:.5s;cursor:pointer}.padding-day[_ngcontent-%COMP%]{color:#a5a5a5;-webkit-user-select:none;user-select:none}.calendar-toolbar[_ngcontent-%COMP%] > [class$=month-btn][_ngcontent-%COMP%]:hover, .month-day[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:hover{border-radius:15px;background-color:#f8f7fa;color:#7047eb;transition:.1s;cursor:pointer;box-shadow:inset 0 0 0 1.5px #7047eb}.calendar-toolbar[_ngcontent-%COMP%] > [class$=month-btn][_ngcontent-%COMP%]:focus, .month-day[_ngcontent-%COMP%]:focus, .btn[_ngcontent-%COMP%]:focus{border-radius:15px;background-color:#7047eb;color:#f8f7fa}.goto-buttons[_ngcontent-%COMP%]{border-top:1px solid #efefef;padding-block:18px;display:flex;justify-content:space-evenly}.btn[_ngcontent-%COMP%]{background:#f8f7fa;border:none;border-radius:15px;padding:11px 13px;color:#19181a;font-family:Quicksand,sans-serif;font-weight:600;font-size:.9rem;margin-right:1px;box-shadow:0 0 #efefef}.scroll-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;position:relative}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}thead[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#fff;box-shadow:0 2px 4px #0000001a}th[_ngcontent-%COMP%]{padding:10px;font-weight:700;text-align:center;text-transform:uppercase;color:#333}.dia-cell[_ngcontent-%COMP%]{white-space:nowrap;text-align:center}.horario-cell[_ngcontent-%COMP%]{padding:10px}.efe[_ngcontent-%COMP%]{margin-bottom:5px}.btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.spinner-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background-color:#00000080;z-index:9999}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),o})();function N(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-elegir-especialidad",3),t.NdJ("especialidad",function(n){return t.CHM(e),t.oxw().recibir(n)}),t.qZA()}}function Q(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-elegir-especialista",4),t.NdJ("obj",function(n){return t.CHM(e),t.oxw().objectomodificar(n)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("usuarios",e.usuarios)}}function I(o,r){if(1&o&&t._UZ(0,"app-elegir-horarios",5),2&o){const e=t.oxw();t.Q6J("objectoActual",e.objbuscar)}}const Y=[{path:"",component:(()=>{class o{constructor(e){this.cargarhora=e,this.boolespecialidad=!0,this.boolespecialista=!1,this.boolhorarios=!1,this.usuarios=[]}ngOnInit(){}recibir(e){this.boolespecialidad=!1,this.boolespecialista=!0,this.especialidad=e,this.cargarhora.getAll().valueChanges().subscribe(i=>{this.usuarios=[];for(let n=0;n<i.length;n++)i[n].especialidad==this.especialidad&&this.usuarios.push(i[n])})}objectomodificar(e){this.objbuscar=e,this.boolespecialidad=!1,this.boolespecialista=!1,this.boolhorarios=!0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-turnosprincipal"]],decls:3,vars:3,consts:[[3,"especialidad",4,"ngIf"],[3,"usuarios","obj",4,"ngIf"],[3,"objectoActual",4,"ngIf"],[3,"especialidad"],[3,"usuarios","obj"],[3,"objectoActual"]],template:function(e,i){1&e&&(t.YNc(0,N,1,0,"app-elegir-especialidad",0),t.YNc(1,Q,1,1,"app-elegir-especialista",1),t.YNc(2,I,1,1,"app-elegir-horarios",2)),2&e&&(t.Q6J("ngIf",i.boolespecialidad),t.xp6(1),t.Q6J("ngIf",i.boolespecialista),t.xp6(1),t.Q6J("ngIf",i.boolhorarios))},directives:[d.O5,x,y,J],styles:[""]}),o})()}];let $=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(Y)],g.Bz]}),o})();var D=l(9224),z=l(5245),q=l(9772),U=l(2075);let G=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,$,D.QW,z.Ps,q.AV,m.ot,U.p0]]}),o})()}}]);